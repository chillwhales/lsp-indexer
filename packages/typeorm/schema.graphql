enum LSP4TokenTypeEnum {
  TOKEN
  NFT
  COLLECTION
}

enum LSP8TokenIdFormatEnum {
  NUMBER
  STRING
  ADDRESS
  BYTES32
}

enum OperationType {
  CALL
  CREATE
  CREATE2
  STATICCALL
  DELEGATECALL
}

type Executed @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  blockNumber: Int! @index
  logIndex: Int! @index
  transactionIndex: Int! @index
  address: String! @index
  decodedOperationType: OperationType! @index
  operationType: BigInt! @index
  value: BigInt! @index
  target: String! @index
  selector: String! @index
  universalProfile: UniversalProfile @index
}

type UniversalReceiver @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  blockNumber: Int! @index
  logIndex: Int! @index
  transactionIndex: Int! @index
  address: String! @index
  from: String! @index
  value: BigInt! @index
  typeId: String! @index
  receivedData: String!
  returnedValue: String!
  universalProfile: UniversalProfile! @index
}

type Follow @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  blockNumber: Int! @index
  logIndex: Int! @index
  transactionIndex: Int! @index
  address: String! @index
  followerAddress: String! @index
  followedAddress: String! @index
  followerUniversalProfile: UniversalProfile! @index
  followedUniversalProfile: UniversalProfile! @index
}

type Unfollow @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  blockNumber: Int! @index
  logIndex: Int! @index
  transactionIndex: Int! @index
  address: String! @index
  followerAddress: String! @index
  unfollowedAddress: String! @index
  followerUniversalProfile: UniversalProfile! @index
  unfollowedUniversalProfile: UniversalProfile! @index
}

type DataChanged @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  blockNumber: Int! @index
  logIndex: Int! @index
  transactionIndex: Int! @index
  address: String! @index
  dataKey: String! @index
  dataValue: String!
  universalProfile: UniversalProfile @index
  digitalAsset: DigitalAsset @index
}

type TokenIdDataChanged @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  blockNumber: Int! @index
  logIndex: Int! @index
  transactionIndex: Int! @index
  tokenId: String! @index
  address: String! @index
  dataKey: String! @index
  dataValue: String!
  digitalAsset: DigitalAsset! @index
  nft: NFT! @index
}

type Transfer @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  blockNumber: Int! @index
  logIndex: Int! @index
  transactionIndex: Int! @index
  address: String! @index
  operator: String! @index
  from: String! @index
  to: String! @index
  amount: BigInt! @index
  tokenId: String @index
  force: Boolean! @index
  data: String!
  digitalAsset: DigitalAsset! @index
  nft: NFT @index
}

type DeployedContracts @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  blockNumber: Int! @index
  logIndex: Int! @index
  transactionIndex: Int! @index
  address: String! @index
  primaryContract: String!
  secondaryContract: String!
  primaryContractDeployment: PrimaryContractDeployment!
  secondaryContractDeployment: SecondaryContractDeployment!
  postDeploymentModule: String! @index
  postDeploymentModuleCalldata: String!
}

type DeployedERC1167Proxies @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  blockNumber: Int! @index
  logIndex: Int! @index
  transactionIndex: Int! @index
  address: String! @index
  primaryContract: String!
  secondaryContract: String!
  primaryContractDeploymentInit: PrimaryContractDeploymentInit!
  secondaryContractDeploymentInit: SecondaryContractDeploymentInit!
  postDeploymentModule: String! @index
  postDeploymentModuleCalldata: String!
}

type PrimaryContractDeployment {
  salt: String!
  fundingAmount: BigInt!
  creationBytecode: String!
}

type SecondaryContractDeployment {
  fundingAmount: BigInt!
  creationBytecode: String!
  addPrimaryContractAddress: Boolean!
  extraConstructorParams: String!
}

type PrimaryContractDeploymentInit {
  salt: String!
  fundingAmount: BigInt!
  implementationContract: String!
  initializationCalldata: String!
}

type SecondaryContractDeploymentInit {
  fundingAmount: BigInt!
  implementationContract: String!
  initializationCalldata: String!
  addPrimaryContractAddress: Boolean!
  extraInitializationParams: String!
}

type UniversalProfile @entity {
  id: ID! @unique
  address: String! @index
  ownedAssets: [OwnedAsset!]! @derivedFrom(field: "universalProfile")
  ownedTokens: [OwnedToken!]! @derivedFrom(field: "universalProfile")

  # ERC725 Data Keys
  lsp3Profile: LSP3Profile @index
  lsp5ReceivedAssetsLength: LSP5ReceivedAssetsLength @derivedFrom(field: "universalProfile")
  lsp5ReceivedAssetsItem: [LSP5ReceivedAssetsItem!]! @derivedFrom(field: "universalProfile")
  lsp5ReceivedAssetsMap: [LSP5ReceivedAssetsMap!]! @derivedFrom(field: "universalProfile")
  lsp6ControllersLength: LSP6ControllersLength @derivedFrom(field: "universalProfile")
  lsp6ControllersItem: [LSP6ControllersItem!]! @derivedFrom(field: "universalProfile")
  lsp6ControllerPermissions: [LSP6ControllerPermissions!]! @derivedFrom(field: "universalProfile")
  lsp6ControllerAllowedCalls: [LSP6ControllerAllowedCalls!]! @derivedFrom(field: "universalProfile")
  lsp6ControllerAllowedErc725YDataKeys: [LSP6ControllerAllowedERC725YDataKeys!]!
    @derivedFrom(field: "universalProfile")
  lsp12IssuedAssetsLength: LSP12IssuedAssetsLength @derivedFrom(field: "universalProfile")
  lsp12IssuedAssetsItem: [LSP12IssuedAssetsItem!]! @derivedFrom(field: "universalProfile")
  lsp12IssuedAssetsMap: [LSP12IssuedAssetsMap!]! @derivedFrom(field: "universalProfile")

  # Events
  executed: [Executed!]! @derivedFrom(field: "universalProfile")
  universalReceiver: [UniversalReceiver!]! @derivedFrom(field: "universalProfile")
  dataChanged: [DataChanged!]! @derivedFrom(field: "universalProfile")
  followed: [Follow!]! @derivedFrom(field: "followerUniversalProfile")
  followedBy: [Follow!]! @derivedFrom(field: "followedUniversalProfile")
  unfollowed: [Unfollow!]! @derivedFrom(field: "followerUniversalProfile")
  unfollowedBy: [Unfollow!]! @derivedFrom(field: "unfollowedUniversalProfile")
}

type DigitalAsset @entity {
  id: ID! @unique
  address: String! @index
  totalSupply: TotalSupply @derivedFrom(field: "digitalAsset")
  ownedAssets: [OwnedAsset!]! @derivedFrom(field: "digitalAsset")
  ownedTokens: [OwnedToken!]! @derivedFrom(field: "digitalAsset")

  # ERC725 Data Keys
  lsp4Metadata: LSP4Metadata @index
  lsp4TokenName: LSP4TokenName @derivedFrom(field: "digitalAsset")
  lsp4TokenSymbol: LSP4TokenSymbol @derivedFrom(field: "digitalAsset")
  lsp4TokenType: LSP4TokenType @derivedFrom(field: "digitalAsset")
  lsp4CreatorsLength: LSP4CreatorsLength @derivedFrom(field: "digitalAsset")
  lsp4CreatorsItem: [LSP4CreatorsItem!]! @derivedFrom(field: "digitalAsset")
  lsp4CreatorsMap: [LSP4CreatorsMap!]! @derivedFrom(field: "digitalAsset")

  # LSP7 properties
  decimals: Decimals @derivedFrom(field: "digitalAsset")

  # LSP8 properties
  lsp8TokenIdFormat: LSP8TokenIdFormat @derivedFrom(field: "digitalAsset")
  lsp8ReferenceContract: LSP8ReferenceContract @derivedFrom(field: "digitalAsset")
  lsp8TokenMetadataBaseUri: LSP8TokenMetadataBaseURI @derivedFrom(field: "digitalAsset")
  nfts: [NFT!]! @derivedFrom(field: "digitalAsset")

  # Events
  dataChanged: [DataChanged!]! @derivedFrom(field: "digitalAsset")
  tokenIdDataChanged: [TokenIdDataChanged!]! @derivedFrom(field: "digitalAsset")
  transfer: [Transfer!]! @derivedFrom(field: "digitalAsset")
}

type TotalSupply @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index @unique
  value: BigInt! @index
}

type Decimals @entity {
  id: ID! @unique
  address: String! @index
  digitalAsset: DigitalAsset! @index @unique
  value: Int! @index
}

type NFT @entity @index(fields: ["tokenId", "digitalAsset"]) {
  id: ID! @unique
  tokenId: String! @index
  formattedTokenId: String @index
  address: String! @index
  digitalAsset: DigitalAsset @index
  lsp4Metadata: LSP4Metadata @index
  lsp4MetadataBaseUri: LSP4Metadata @index
  isMinted: Boolean! @index
  isBurned: Boolean! @index
  ownedToken: OwnedToken @derivedFrom(field: "nft")

  # chillwhales properties
  chillClaimed: ChillClaimed @derivedFrom(field: "nft")
  orbsClaimed: OrbsClaimed @derivedFrom(field: "nft")

  # ORBS properties
  level: OrbLevel @derivedFrom(field: "nft")
  cooldownExpiry: OrbCooldownExpiry @derivedFrom(field: "nft")
  faction: OrbFaction @derivedFrom(field: "nft")

  # Events
  tokenIdDataChanged: [TokenIdDataChanged!]! @derivedFrom(field: "nft")
  transfer: [Transfer!]! @derivedFrom(field: "nft")
}

type OwnedAsset @entity @index(fields: ["address", "owner"]) {
  id: ID! @unique
  block: Int! @index
  timestamp: DateTime! @index
  balance: BigInt! @index
  address: String! @index
  owner: String! @index

  digitalAsset: DigitalAsset @index
  universalProfile: UniversalProfile @index

  # LSP8 properties
  tokenIds: [OwnedToken!] @derivedFrom(field: "ownedAsset")
}

type OwnedToken @entity @index(fields: ["address", "tokenId", "owner"]) {
  id: ID! @unique
  block: Int! @index
  timestamp: DateTime! @index
  tokenId: String! @index
  address: String! @index
  owner: String! @index

  nft: NFT @index @unique
  digitalAsset: DigitalAsset @index
  universalProfile: UniversalProfile @index

  ownedAsset: OwnedAsset @index
}

type LSP4TokenName @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index @unique
  value: String @index
  rawValue: String!
}

type LSP4TokenSymbol @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index @unique
  value: String @index
  rawValue: String!
}

type LSP4TokenType @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index @unique
  value: LSP4TokenTypeEnum @index
  rawValue: String!
}

type LSP4CreatorsLength @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index @unique
  value: BigInt @index
  rawValue: String!
}

type LSP4CreatorsItem @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index
  creatorAddress: String @index
  creatorIndex: BigInt! @index
  rawValue: String!
}

type LSP4CreatorsMap @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index
  creatorAddress: String! @index
  creatorInterfaceId: String @index
  creatorIndex: BigInt @index
  rawValue: String!
}

type LSP5ReceivedAssetsLength @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index @unique
  value: BigInt @index
  rawValue: String!
}

type LSP5ReceivedAssetsItem @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index
  receivedAssetAddress: String @index
  receivedAssetIndex: BigInt! @index
  rawValue: String!
}

type LSP5ReceivedAssetsMap @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index
  receivedAssetAddress: String! @index
  receivedAssetInterfaceId: String @index
  receivedAssetIndex: BigInt @index
  rawValue: String!
}

type LSP6ControllersLength @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index @unique
  value: BigInt @index
  rawValue: String!
}

type LSP6ControllersItem @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index
  controllerAddress: String @index
  controllerIndex: BigInt! @index
  rawValue: String!
}

type LSP6ControllerPermissions @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index
  controllerAddress: String! @index
  controllerPermissions: [LSP6Permission!]! @derivedFrom(field: "lsp6ControllerPermissions")
  rawValue: String!
}

type LSP6Permission @entity {
  id: ID! @unique
  permissionName: String! @index
  permissionValue: Boolean! @index
  lsp6ControllerPermissions: LSP6ControllerPermissions @index
}

type LSP6ControllerAllowedCalls @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index
  controllerAddress: String! @index
  controllerAllowedCalls: [LSP6AllowedCall!]! @derivedFrom(field: "lsp6ControllerAllowedCalls")
  rawValue: String!
}

type LSP6AllowedCall @entity {
  id: ID! @unique
  # 4 bytes
  restrictionOperations: String! @index
  # 20 bytes
  allowedAddress: String! @index
  # 4 bytes
  allowedInterfaceId: String! @index
  # 4 bytes
  allowedFunction: String! @index
  lsp6ControllerAllowedCalls: LSP6ControllerAllowedCalls @index
}

type LSP6ControllerAllowedERC725YDataKeys @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index
  controllerAddress: String! @index
  controllerAllowedCalls: [LSP6AllowedERC725YDataKey!]!
    @derivedFrom(field: "lsp6ControllerAllowedErc725YDataKeys")
  rawValue: String!
}

type LSP6AllowedERC725YDataKey @entity {
  id: ID! @unique
  allowedDataKey: String! @index
  lsp6ControllerAllowedErc725YDataKeys: LSP6ControllerAllowedERC725YDataKeys @index
}

type LSP8TokenIdFormat @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index @unique
  value: LSP8TokenIdFormatEnum @index
  rawValue: String!
}

type LSP8ReferenceContract @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index @unique
  value: String @index
  rawValue: String!
}

type LSP8TokenMetadataBaseURI @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index @unique
  value: String @index
  rawValue: String!
}

type LSP12IssuedAssetsLength @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index @unique
  value: BigInt @index
  rawValue: String!
}

type LSP12IssuedAssetsItem @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index
  issuedAssetAddress: String @index
  issuedAssetIndex: BigInt! @index
  rawValue: String!
}

type LSP12IssuedAssetsMap @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index
  issuedAssetAddress: String! @index
  issuedAssetInterfaceId: String @index
  issuedAssetIndex: BigInt @index
  rawValue: String!
}

type LSP3Profile @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  universalProfile: UniversalProfile! @index
  name: LSP3ProfileName @derivedFrom(field: "lsp3Profile")
  description: LSP3ProfileDescription @derivedFrom(field: "lsp3Profile")
  tags: [LSP3ProfileTag!]! @derivedFrom(field: "lsp3Profile")
  links: [LSP3ProfileLink!]! @derivedFrom(field: "lsp3Profile")
  avatar: [LSP3ProfileAsset!]! @derivedFrom(field: "lsp3Profile")
  profileImage: [LSP3ProfileImage!]! @derivedFrom(field: "lsp3Profile")
  backgroundImage: [LSP3ProfileBackgroundImage!]! @derivedFrom(field: "lsp3Profile")
  url: String
  rawValue: String!
  decodeError: String
  isDataFetched: Boolean!
  fetchErrorMessage: String
  fetchErrorCode: String
  fetchErrorStatus: Int
  retryCount: Int
}

type LSP3ProfileName @entity {
  id: ID! @unique
  lsp3Profile: LSP3Profile! @index @unique
  value: String @index
}

type LSP3ProfileDescription @entity {
  id: ID! @unique
  lsp3Profile: LSP3Profile! @index @unique
  value: String
}
type LSP3ProfileTag @entity {
  id: ID! @unique
  lsp3Profile: LSP3Profile! @index
  value: String @index
}

type LSP3ProfileLink @entity {
  id: ID! @unique
  lsp3Profile: LSP3Profile! @index
  title: String @index
  url: String @index
}

type LSP3ProfileAsset @entity {
  id: ID! @unique
  lsp3Profile: LSP3Profile! @index
  url: String
  fileType: String @index
  verificationMethod: String
  verificationData: String
  verificationSource: String
}

type LSP3ProfileImage @entity {
  id: ID! @unique
  lsp3Profile: LSP3Profile! @index
  width: Int @index
  height: Int @index
  url: String
  verificationMethod: String
  verificationData: String
  verificationSource: String
}

type LSP3ProfileBackgroundImage @entity {
  id: ID! @unique
  lsp3Profile: LSP3Profile! @index
  width: Int @index
  height: Int @index
  url: String
  verificationMethod: String
  verificationData: String
  verificationSource: String
}

type LSP4Metadata @entity {
  id: ID! @unique
  timestamp: DateTime! @index
  address: String! @index
  digitalAsset: DigitalAsset! @index
  tokenId: String @index
  nft: NFT @index
  name: LSP4MetadataName @derivedFrom(field: "lsp4Metadata")
  description: LSP4MetadataDescription @derivedFrom(field: "lsp4Metadata")
  score: LSP4MetadataScore @derivedFrom(field: "lsp4Metadata")
  rank: LSP4MetadataRank @derivedFrom(field: "lsp4Metadata")
  links: [LSP4MetadataLink!]! @derivedFrom(field: "lsp4Metadata")
  icon: [LSP4MetadataIcon!]! @derivedFrom(field: "lsp4Metadata")
  images: [LSP4MetadataImage!]! @derivedFrom(field: "lsp4Metadata")
  assets: [LSP4MetadataAsset!]! @derivedFrom(field: "lsp4Metadata")
  attributes: [LSP4MetadataAttribute!]! @derivedFrom(field: "lsp4Metadata")
  url: String
  rawValue: String!
  decodeError: String
  isDataFetched: Boolean!
  fetchErrorMessage: String
  fetchErrorCode: String
  fetchErrorStatus: Int
  retryCount: Int
}

type LSP4MetadataName @entity {
  id: ID! @unique
  lsp4Metadata: LSP4Metadata! @index @unique
  value: String @index
}

type LSP4MetadataDescription @entity {
  id: ID! @unique
  lsp4Metadata: LSP4Metadata! @index @unique
  value: String
}

type LSP4MetadataScore @entity {
  id: ID! @unique
  lsp4Metadata: LSP4Metadata! @index @unique
  value: Int @index
}

type LSP4MetadataRank @entity {
  id: ID! @unique
  lsp4Metadata: LSP4Metadata! @index @unique
  value: Int @index
}

type LSP4MetadataLink @entity {
  id: ID! @unique
  lsp4Metadata: LSP4Metadata! @index
  title: String @index
  url: String @index
}

type LSP4MetadataIcon @entity {
  id: ID! @unique
  lsp4Metadata: LSP4Metadata! @index
  width: Int @index
  height: Int @index
  url: String
  verificationMethod: String
  verificationData: String
  verificationSource: String
}

type LSP4MetadataImage @entity {
  id: ID! @unique
  lsp4Metadata: LSP4Metadata! @index
  width: Int @index
  height: Int @index
  url: String
  verificationMethod: String
  verificationData: String
  verificationSource: String
}

type LSP4MetadataAsset @entity {
  id: ID! @unique
  lsp4Metadata: LSP4Metadata! @index
  url: String
  fileType: String @index
  verificationMethod: String
  verificationData: String
  verificationSource: String
}

type LSP4MetadataAttribute @entity {
  id: ID! @unique
  lsp4Metadata: LSP4Metadata! @index
  key: String @index
  value: String @index
  type: String @index
  score: Float @index
  rarity: Float @index
}

type ChillClaimed @entity {
  id: ID! @unique
  address: String! @index
  digitalAsset: DigitalAsset! @index
  tokenId: String! @index
  nft: NFT! @index @unique
  value: Boolean!
}

type OrbsClaimed @entity {
  id: ID! @unique
  address: String! @index
  digitalAsset: DigitalAsset! @index
  tokenId: String! @index
  nft: NFT! @index @unique
  value: Boolean!
}

type OrbLevel @entity {
  id: ID! @unique
  address: String! @index
  digitalAsset: DigitalAsset! @index
  tokenId: String! @index
  nft: NFT! @index @unique
  value: Int!
}

type OrbCooldownExpiry @entity {
  id: ID! @unique
  address: String! @index
  digitalAsset: DigitalAsset! @index
  tokenId: String! @index
  nft: NFT! @index @unique
  value: Int!
}

type OrbFaction @entity {
  id: ID! @unique
  address: String! @index
  digitalAsset: DigitalAsset! @index
  tokenId: String! @index
  nft: NFT! @index @unique
  value: String!
}
